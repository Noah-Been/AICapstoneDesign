# 전체 데이터 파이프라인 자동화 및 리포트 생성 (2025-10-21)

## 주요 목표
- 기존의 모든 데이터 수집 및 리포트 생성 단계를 하나의 마스터 스크립트로 통합하여, 날짜 지정만으로 전체 프로세스를 자동화.
- 자동화된 파이프라인을 사용하여 `2025-10-21` 날짜의 데일리 리포트 생성.

## 주요 성과 및 완료된 작업

### 1. 마스터 파이프라인 스크립트 `run_daily_pipeline.sh` 생성
- **기능:** 아래의 모든 작업을 순차적으로 실행하는 쉘 스크립트 작성.
  1. 주가 데이터 수집 (`batch_prices.py`)
  2. Top N 종목 선정 (`signals.py`)
  3. 4개 증권사 리포트 수집 (`run_*_pipeline.py`)
  4. 뉴스/블로그 수집 (`run_top_crawl.sh`)
  5. 최종 데일리 리포트 생성 (`generate_report.py`)
- **특징:** 날짜를 파라미터로 받아 실행하며, 모든 내부 경로는 절대 경로를 사용하도록 수정하여 실행 위치에 상관없이 안정적으로 동작하도록 개선.

### 2. `2025-10-21` 데일리 리포트 생성 완료
- 새로 작성된 `run_daily_pipeline.sh`를 `2025-10-21` 날짜로 실행하여, 최종 산출물인 `daily_report_2025-10-21.md` 생성을 완료함.
- **최종 리포트 위치:** `reports/daily_report_2025-10-21.md`

## 문제 해결 및 디버깅 과정
이번 자동화 과정에서 여러 이슈를 해결하며 파이프라인의 안정성을 크게 높였습니다.

1.  **API 요청 제한 (Rate Limit) 문제:**
    - **현상:** `batch_prices.py` 실행 중 LS증권 API의 초당 호출 건수 제한으로 일부 데이터 수집 실패.
    - **해결:** API 호출 사이의 대기 시간(`sleep`)을 1.1초로 늘려 안정적인 데이터 수집을 보장함.

2.  **상대 경로로 인한 파일럿 오류 (`FileNotFoundError`):**
    - **현상:** `run_top_crawl.sh` 및 `signals.py`가 실행 위치에 따라 `topN.json` 등 필요한 파일을 찾지 못하는 문제 발생.
    - **해결:** 관련된 모든 스크립트(`signals.py`, `batch_prices.py`, `news_naver.py` 등)의 파일 경로 처리 방식을 **절대 경로**를 사용하도록 전면 수정하여, 어떤 위치에서든 스크립트가 정상 동작하도록 수정함.

3.  **리포트 파일 미생성 문제:**
    - **현상:** 파이프라인의 마지막 단계에서 로그상으로는 리포트 파일이 생성되었다고 나오나, 실제로는 파일이 생성되지 않는 이례적인 문제 발생.
    - **해결:** 경로 문제 해결 후, 리포트 생성 스크립트(`generate_report.py`)만 단독으로 재실행하여 최종적으로 파일 생성을 확인함. 이를 통해 전체 파이프라인의 각 단계가 올바르게 작동하는 것을 검증함.

## 결론
모든 데이터 수집 및 분석, 리포트 생성까지의 과정이 단일 스크립트 실행으로 자동화되었습니다. 이제 날짜만 변경하여 매일 리포트를 손쉽게 생성할 수 있는 기반이 마련되었습니다.
